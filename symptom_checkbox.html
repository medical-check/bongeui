<script>
    function checkDiseases() {
        const checked = Array.from(document.querySelectorAll('input[type="checkbox"]:checked')).map(cb => cb.value);
        const resultDiv = document.getElementById('result');
        resultDiv.innerHTML = "";

        const matched = {};

        checked.forEach(symptom => {
            const diseases = diseaseData[symptom];
            if (diseases) {
                diseases.forEach(disease => {
                    if (!matched[disease.병명]) {
                        matched[disease.병명] = { ...disease };
                    }
                });
            }
        });

        const results = Object.values(matched);

        if (results.length === 0) {
            resultDiv.innerHTML = "<p>일치하는 병명이 없습니다.</p>";
        } else {
            results.forEach(disease => {
                // 병에 해당하는 전체 증상 수집
                const allSymptoms = [];
                for (let symptom in diseaseData) {
                    diseaseData[symptom].forEach(d => {
                        if (d.병명 === disease.병명 && !allSymptoms.includes(symptom)) {
                            allSymptoms.push(symptom);
                        }
                    });
                }

                // 증상 색상 구분하여 span 태그로 구성
                const coloredSymptoms = allSymptoms.map(symptom => {
                    const color = checked.includes(symptom) ? 'blue' : 'black';
                    return `<span style="color: ${color};">${symptom}</span>`;
                }).join(', ');

                const div = document.createElement('div');
                div.innerHTML = `
                    <h3>${disease.병명}</h3>
                    <p><strong>관련 증상 전체:</strong> ${coloredSymptoms}</p>
                    <p><strong>치료방법:</strong> ${disease.치료방법}</p>
                `;
                resultDiv.appendChild(div);
            });
        }
    }
</script>

