function checkDiseases() {
    const checked = Array.from(document.querySelectorAll('input[type="checkbox"]:checked')).map(cb => cb.value);
    const resultDiv = document.getElementById('result');
    resultDiv.innerHTML = "";

    const matched = {};
    checked.forEach(symptom => {
        diseaseData[symptom]?.forEach(disease => {
            if (!matched[disease.병명]) {
                matched[disease.병명] = { ...disease, 선택된증상: [symptom] };
            } else {
                matched[disease.병명].선택된증상.push(symptom);
            }
        });
    });

    const results = Object.values(matched);
    if (results.length === 0) {
        resultDiv.innerHTML = "<p>일치하는 병명이 없습니다.</p>";
    } else {
        results.forEach(disease => {
            // 병명에 해당하는 전체 증상 다시 가져오기
            const allSymptoms = [];
            for (let symptom in diseaseData) {
                diseaseData[symptom].forEach(d => {
                    if (d.병명 === disease.병명 && !allSymptoms.includes(symptom)) {
                        allSymptoms.push(symptom);
                    }
                });
            }

            const div = document.createElement('div');
            div.innerHTML = `<h3>${disease.병명}</h3>
                <p><strong>선택된 증상:</strong> ${disease.선택된증상.join(', ')}</p>
                <p><strong>이 병에 나타나는 모든 증상:</strong> ${allSymptoms.join(', ')}</p>
                <p><strong>치료방법:</strong> ${disease.치료방법}</p>`;
            resultDiv.appendChild(div);
        });
    }
}
